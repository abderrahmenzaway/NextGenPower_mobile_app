# Requirements Installation Guide

This document lists all dependencies needed to run the Predictive Maintenance Backend System.

## Python Dependencies (Flask Server)

### Installation Command
```cmd
cd flask_server
pip install -r requirements.txt
```

### Required Packages
- **torch>=1.10.0** - PyTorch for neural network models
- **numpy>=1.21.0** - Numerical computing
- **pandas>=1.3.0** - Data manipulation and analysis
- **scikit-learn>=0.24.0** - Machine learning preprocessing tools
- **Flask>=2.0.0** - Web framework for Python
- **flask-cors>=3.0.10** - Cross-Origin Resource Sharing for Flask
- **pickle5>=0.0.11** - Pickle protocol 5 backport

### Installation Notes
- If you have a CUDA-compatible GPU, install PyTorch with CUDA support:
  ```cmd
  pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
  ```
- For CPU-only installation (slower but works everywhere):
  ```cmd
  pip install torch torchvision torchaudio
  ```

## Node.js Dependencies (Express Server)

### Installation Command
```cmd
cd express_server
npm install
```

### Required Packages

#### Production Dependencies
- **express@^4.18.2** - Fast, unopinionated web framework
- **axios@^1.6.0** - Promise-based HTTP client
- **cors@^2.8.5** - CORS middleware
- **helmet@^7.1.0** - Security middleware (sets HTTP headers)
- **morgan@^1.10.0** - HTTP request logger
- **express-rate-limit@^7.1.5** - Rate limiting middleware
- **dotenv@^16.3.1** - Environment variable management

#### Development Dependencies
- **nodemon@^3.0.2** - Auto-restart on file changes (optional)

### Installation Notes
- Requires Node.js 14.0.0 or higher
- Requires npm 6.0.0 or higher
- All dependencies will be installed automatically with `npm install`

## Additional System Requirements

### For Python
- Python 3.8 or higher
- pip (Python package installer)
- Optional: CUDA toolkit for GPU acceleration

### For Node.js
- Node.js 14.0.0 or higher
- npm 6.0.0 or higher

## Quick Setup Commands

### Complete Setup (Windows)
Run the provided batch script:
```cmd
setup.bat
```

This will:
1. Create .env files from examples
2. Install all Python dependencies
3. Install all Node.js dependencies

### Manual Setup

#### Step 1: Python Dependencies
```cmd
cd flask_server
pip install -r requirements.txt
cd ..
```

#### Step 2: Node.js Dependencies
```cmd
cd express_server
npm install
cd ..
```

#### Step 3: Generate Scaler (IMPORTANT)
Before starting the Flask server for the first time:
```cmd
python generate_scaler.py
```

This creates the `scaler.pkl` file needed by the Flask server.

## Verification

### Check Python Installation
```cmd
cd flask_server
python -c "import torch, numpy, pandas, sklearn, flask; print('All Python packages installed successfully')"
```

### Check Node.js Installation
```cmd
cd express_server
npm list --depth=0
```

### Check Model Files
Ensure these files exist in the `Models/` directory:
- ✓ vae_model.pth
- ✓ classifier_model.pth
- ✓ label_encoder.pkl
- ✓ scaler.pkl (generated by generate_scaler.py)

## Troubleshooting

### Python Issues

**Problem:** "ModuleNotFoundError: No module named 'torch'"
**Solution:** Install PyTorch: `pip install torch`

**Problem:** CUDA errors when loading model
**Solution:** The system will automatically fall back to CPU. No action needed.

**Problem:** "FileNotFoundError: scaler.pkl not found"
**Solution:** Run `python generate_scaler.py` to create the scaler file.

### Node.js Issues

**Problem:** "Cannot find module 'express'"
**Solution:** Run `npm install` in the express_server directory

**Problem:** Port already in use
**Solution:** Change PORT in .env file or stop the process using the port

### General Issues

**Problem:** Setup script fails
**Solution:** Run commands manually following the Manual Setup section

**Problem:** Model files not found
**Solution:** Ensure you've trained the models first using `training.py`

## Development Setup

For development with auto-reload:

### Flask (not recommended, use for debugging only)
```cmd
cd flask_server
set FLASK_ENV=development
set FLASK_DEBUG=1
python app.py
```

### Express
```cmd
cd express_server
npm run dev
```

## Production Considerations

For production deployment:

1. **Use production-grade servers:**
   - Flask: gunicorn or uWSGI
   - Express: PM2 process manager

2. **Install additional packages:**
   ```cmd
   pip install gunicorn
   npm install -g pm2
   ```

3. **Run with production settings:**
   ```cmd
   # Flask with gunicorn
   cd flask_server
   gunicorn -w 4 -b 0.0.0.0:5002 app:app
   
   # Express with PM2
   cd express_server
   pm2 start server.js --name "predictive-maintenance-api"
   ```

## Summary Checklist

Before starting the servers, ensure:

- [ ] Python 3.8+ installed
- [ ] Node.js 14+ installed
- [ ] All Python packages installed (`pip install -r requirements.txt`)
- [ ] All Node.js packages installed (`npm install`)
- [ ] Scaler generated (`python generate_scaler.py`)
- [ ] All 4 model files exist in Models/ directory
- [ ] .env files configured in both server directories
- [ ] Port 5002 available for Flask
- [ ] Port 3002 available for Express

Once all items are checked, you're ready to start the servers!
